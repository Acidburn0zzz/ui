import { resolve } from 'rsvp';
import EmberObject from '@ember/object';

const scms = [
  {
    context: 'github:github.com',
    displayName: 'github.com',
    iconType: 'fa-github',
    isSignedIn: true
  },
  {
    context: 'bitbucket:bitbucket.org',
    displayName: 'bitbucket.org',
    iconType: 'fa-bitbucket',
    isSignedIn: false
  }
];

/**
 * Inject scm service to an Ember Object
 * @param {Object} self - Ember object generated by ember-qunit moduleFor()
 */
export default function injectScmServiceStub(self) {
  const scmServiceStub = EmberObject.extend({
    createScms() {
      return resolve(scms);
    },
    getScms() {
      return scms;
    },
    getScm(scmContext) {
      return this.getScms().find(scm => scm.context === scmContext);
    }
  });

  self.register('service:scm', scmServiceStub);
  self.inject.service('scm');
}
